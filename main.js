/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => VimScroll
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  mySetting: "default"
};
var VimScroll = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.handleKeyPress = (event) => {
      const activeLeaf = this.app.workspace.activeLeaf;
      if (activeLeaf && activeLeaf.view.getViewType() === "markdown") {
        const markdownView = activeLeaf.view;
        const mode = markdownView.getMode();
        if (mode === "preview") {
          if (event.key === "j") {
            this.scrollPreviewPane(60);
            event.preventDefault();
          } else if (event.key === "k") {
            this.scrollPreviewPane(-60);
            event.preventDefault();
          } else if (event.key === "g") {
            this.scrollPreviewPaneBeginning();
            event.preventDefault();
          } else if (event.key === "G") {
            this.scrollPreviewPaneEnd();
            event.preventDefault();
          }
        }
      }
    };
  }
  async onload() {
    await this.loadSettings();
    document.addEventListener("keydown", this.handleKeyPress);
    this.registerDomEvent(document, "click", (evt) => {
      console.log("click", evt);
    });
    this.registerInterval(window.setInterval(() => console.log("setInterval"), 5 * 60 * 1e3));
  }
  onunload() {
    document.removeEventListener("keydown", this.handleKeyPress);
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async scrollPreviewPaneEnd() {
    let markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (markdownView) {
      const file = this.app.workspace.getActiveFile();
      const content = await this.app.vault.cachedRead(file);
      const lines = content.split("\n");
      let numberOfLines = lines.length;
      if (markdownView.getMode() === "preview") {
        while (numberOfLines > 0 && lines[numberOfLines - 1].trim() === "") {
          numberOfLines--;
        }
      }
      markdownView.currentMode.applyScroll(numberOfLines - 1);
    }
  }
  async scrollPreviewPaneBeginning() {
    let markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (markdownView) {
      const preview = markdownView.previewMode;
      preview.applyScroll(0);
    }
  }
  scrollPreviewPane(amount) {
    const activeLeaf = this.app.workspace.activeLeaf;
    if (!activeLeaf || activeLeaf.view.getViewType() !== "markdown")
      return;
    const previewContainer = activeLeaf.view.containerEl.querySelector(".markdown-preview-view");
    if (previewContainer) {
      previewContainer.scrollBy({
        top: amount,
        behavior: "auto"
      });
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBSZW1lbWJlciB0byByZW5hbWUgdGhlc2UgY2xhc3NlcyBhbmQgaW50ZXJmYWNlcyFcblxuaW50ZXJmYWNlIE15UGx1Z2luU2V0dGluZ3Mge1xuXHRteVNldHRpbmc6IHN0cmluZztcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTXlQbHVnaW5TZXR0aW5ncyA9IHtcblx0bXlTZXR0aW5nOiAnZGVmYXVsdCdcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmltU2Nyb2xsIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3M7XG5cblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleVByZXNzKTtcblx0XHQvLyBUaGlzIGFkZHMgYSBzdGF0dXMgYmFyIGl0ZW0gdG8gdGhlIGJvdHRvbSBvZiB0aGUgYXBwLiBEb2VzIG5vdCB3b3JrIG9uIG1vYmlsZSBhcHBzLlxuXG5cdFx0Ly8gSWYgdGhlIHBsdWdpbiBob29rcyB1cCBhbnkgZ2xvYmFsIERPTSBldmVudHMgKG9uIHBhcnRzIG9mIHRoZSBhcHAgdGhhdCBkb2Vzbid0IGJlbG9uZyB0byB0aGlzIHBsdWdpbilcblx0XHQvLyBVc2luZyB0aGlzIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyIHdoZW4gdGhpcyBwbHVnaW4gaXMgZGlzYWJsZWQuXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRjb25zb2xlLmxvZygnY2xpY2snLCBldnQpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gV2hlbiByZWdpc3RlcmluZyBpbnRlcnZhbHMsIHRoaXMgZnVuY3Rpb24gd2lsbCBhdXRvbWF0aWNhbGx5IGNsZWFyIHRoZSBpbnRlcnZhbCB3aGVuIHRoZSBwbHVnaW4gaXMgZGlzYWJsZWQuXG5cdFx0dGhpcy5yZWdpc3RlckludGVydmFsKHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiBjb25zb2xlLmxvZygnc2V0SW50ZXJ2YWwnKSwgNSAqIDYwICogMTAwMCkpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5UHJlc3MpO1xuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cblxuXHRoYW5kbGVLZXlQcmVzcyA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdGNvbnN0IGFjdGl2ZUxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcblxuXHRcdC8vIENoZWNrIGlmIHRoZXJlIGlzIGFuIGFjdGl2ZSBtYXJrZG93biB2aWV3XG5cdFx0aWYgKGFjdGl2ZUxlYWYgJiYgYWN0aXZlTGVhZi52aWV3LmdldFZpZXdUeXBlKCkgPT09ICdtYXJrZG93bicpIHtcblx0XHQgIGNvbnN0IG1hcmtkb3duVmlldyA9IGFjdGl2ZUxlYWYudmlldyBhcyBNYXJrZG93blZpZXc7XG5cdFx0ICBjb25zdCBtb2RlID0gbWFya2Rvd25WaWV3LmdldE1vZGUoKTtcblxuXHRcdCAgaWYgKG1vZGUgPT09ICdwcmV2aWV3Jykge1xuXHRcdFx0Ly8gU2Nyb2xsIHRoZSBwcmV2aWV3IHBhbmVcblx0XHRcdGlmIChldmVudC5rZXkgPT09ICdqJykge1xuXHRcdFx0ICB0aGlzLnNjcm9sbFByZXZpZXdQYW5lKDYwKTsgLy8gU2Nyb2xsIGRvd24gYnkgMzAgcGl4ZWxzXG5cdFx0XHQgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgZGVmYXVsdCBiZWhhdmlvclxuXHRcdFx0fSBlbHNlIGlmIChldmVudC5rZXkgPT09ICdrJykge1xuXHRcdFx0ICB0aGlzLnNjcm9sbFByZXZpZXdQYW5lKC02MCk7IC8vIFNjcm9sbCB1cCBieSAzMCBwaXhlbHNcblx0XHRcdCAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCBkZWZhdWx0IGJlaGF2aW9yXG5cdFx0XHR9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gJ2cnKSB7XG5cdFx0XHQgIHRoaXMuc2Nyb2xsUHJldmlld1BhbmVCZWdpbm5pbmcoKTsgLy8gU2Nyb2xsIHVwIGJ5IDMwIHBpeGVsc1xuXHRcdFx0ICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IGRlZmF1bHQgYmVoYXZpb3Jcblx0XHRcdH0gXG5cdFx0XHRlbHNlIGlmIChldmVudC5rZXkgPT09ICdHJykge1xuXHRcdFx0ICB0aGlzLnNjcm9sbFByZXZpZXdQYW5lRW5kKCk7IC8vIFNjcm9sbCB1cCBieSAzMCBwaXhlbHNcblx0XHRcdCAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCBkZWZhdWx0IGJlaGF2aW9yXG5cdFx0XHR9XG5cdFx0ICB9XG5cdFx0fVxuXHR9XG5cdGFzeW5jIHNjcm9sbFByZXZpZXdQYW5lRW5kKCkge1xuXHRcdGxldCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdGlmIChtYXJrZG93blZpZXcpIHtcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpXG5cdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgKHRoaXMuYXBwIGFzIGFueSkudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcblx0XHRcdGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG5cdFx0XHRsZXQgbnVtYmVyT2ZMaW5lcyA9IGxpbmVzLmxlbmd0aDtcblx0XHRcdC8vaW4gcHJldmlldyBtb2RlIGRvbid0IGNvdW50IGVtcHR5IGxpbmVzIGF0IHRoZSBlbmRcblx0XHRcdGlmIChtYXJrZG93blZpZXcuZ2V0TW9kZSgpID09PSAncHJldmlldycpIHtcblx0XHRcdFx0d2hpbGUgKG51bWJlck9mTGluZXMgPiAwICYmIGxpbmVzW251bWJlck9mTGluZXMgLSAxXS50cmltKCkgPT09ICcnKSB7XG5cdFx0XHRcdFx0bnVtYmVyT2ZMaW5lcy0tO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRtYXJrZG93blZpZXcuY3VycmVudE1vZGUuYXBwbHlTY3JvbGwoKG51bWJlck9mTGluZXMgLSAxKSlcblx0XHR9IFx0ICBcblx0fVxuXHRhc3luYyBzY3JvbGxQcmV2aWV3UGFuZUJlZ2lubmluZygpIHtcblx0XHRsZXQgbWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRpZiAobWFya2Rvd25WaWV3KSB7XG5cdFx0XHRjb25zdCBwcmV2aWV3ID0gbWFya2Rvd25WaWV3LnByZXZpZXdNb2RlO1xuXHRcdFx0cHJldmlldy5hcHBseVNjcm9sbCgwKTtcblx0ICB9XG5cdH1cblx0c2Nyb2xsUHJldmlld1BhbmUoYW1vdW50OiBudW1iZXIpIHtcblx0XHRjb25zdCBhY3RpdmVMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG5cdFx0aWYgKCFhY3RpdmVMZWFmIHx8IGFjdGl2ZUxlYWYudmlldy5nZXRWaWV3VHlwZSgpICE9PSAnbWFya2Rvd24nKSByZXR1cm47XG5cblx0XHRjb25zdCBwcmV2aWV3Q29udGFpbmVyID0gYWN0aXZlTGVhZi52aWV3LmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5tYXJrZG93bi1wcmV2aWV3LXZpZXcnKTtcblx0XHRpZiAocHJldmlld0NvbnRhaW5lcikge1xuXHRcdCAgcHJldmlld0NvbnRhaW5lci5zY3JvbGxCeSh7XG5cdFx0XHR0b3A6IGFtb3VudCxcblx0XHRcdGJlaGF2aW9yOiAnYXV0bycgXG5cdFx0ICB9KTtcblx0XHR9XG5cdCAgfVxufVxuXG5jbGFzcyBTYW1wbGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0Y29uc3RydWN0b3IoYXBwOiBBcHApIHtcblx0XHRzdXBlcihhcHApO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHtjb250ZW50RWx9ID0gdGhpcztcblx0XHRjb250ZW50RWwuc2V0VGV4dCgnV29haCEnKTtcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbmNsYXNzIFNhbXBsZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBWaW1TY3JvbGw7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmltU2Nyb2xsKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdTZXR0aW5nICMxJylcblx0XHRcdC5zZXREZXNjKCdJdFxcJ3MgYSBzZWNyZXQnKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgeW91ciBzZWNyZXQnKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblx0fVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUE0RjtBQVE1RixJQUFNLG1CQUFxQztBQUFBLEVBQzFDLFdBQVc7QUFDWjtBQUVBLElBQXFCLFlBQXJCLGNBQXVDLHVCQUFPO0FBQUEsRUFBOUM7QUFBQTtBQWdDQywwQkFBaUIsQ0FBQyxVQUF5QjtBQUMxQyxZQUFNLGFBQWEsS0FBSyxJQUFJLFVBQVU7QUFHdEMsVUFBSSxjQUFjLFdBQVcsS0FBSyxZQUFZLE1BQU0sWUFBWTtBQUM5RCxjQUFNLGVBQWUsV0FBVztBQUNoQyxjQUFNLE9BQU8sYUFBYSxRQUFRO0FBRWxDLFlBQUksU0FBUyxXQUFXO0FBRXpCLGNBQUksTUFBTSxRQUFRLEtBQUs7QUFDckIsaUJBQUssa0JBQWtCLEVBQUU7QUFDekIsa0JBQU0sZUFBZTtBQUFBLFVBQ3ZCLFdBQVcsTUFBTSxRQUFRLEtBQUs7QUFDNUIsaUJBQUssa0JBQWtCLEdBQUc7QUFDMUIsa0JBQU0sZUFBZTtBQUFBLFVBQ3ZCLFdBQVcsTUFBTSxRQUFRLEtBQUs7QUFDNUIsaUJBQUssMkJBQTJCO0FBQ2hDLGtCQUFNLGVBQWU7QUFBQSxVQUN2QixXQUNTLE1BQU0sUUFBUSxLQUFLO0FBQzFCLGlCQUFLLHFCQUFxQjtBQUMxQixrQkFBTSxlQUFlO0FBQUEsVUFDdkI7QUFBQSxRQUNDO0FBQUEsTUFDRjtBQUFBLElBQ0Q7QUFBQTtBQUFBLEVBdERBLE1BQU0sU0FBUztBQUNkLFVBQU0sS0FBSyxhQUFhO0FBRXhCLGFBQVMsaUJBQWlCLFdBQVcsS0FBSyxjQUFjO0FBS3hELFNBQUssaUJBQWlCLFVBQVUsU0FBUyxDQUFDLFFBQW9CO0FBQzdELGNBQVEsSUFBSSxTQUFTLEdBQUc7QUFBQSxJQUN6QixDQUFDO0FBR0QsU0FBSyxpQkFBaUIsT0FBTyxZQUFZLE1BQU0sUUFBUSxJQUFJLGFBQWEsR0FBRyxJQUFJLEtBQUssR0FBSSxDQUFDO0FBQUEsRUFDMUY7QUFBQSxFQUVBLFdBQVc7QUFDVixhQUFTLG9CQUFvQixXQUFXLEtBQUssY0FBYztBQUFBLEVBQzVEO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFBQSxFQUMxRTtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ2xDO0FBQUEsRUE2QkEsTUFBTSx1QkFBdUI7QUFDNUIsUUFBSSxlQUFlLEtBQUssSUFBSSxVQUFVLG9CQUFvQiw0QkFBWTtBQUN0RSxRQUFJLGNBQWM7QUFDakIsWUFBTSxPQUFPLEtBQUssSUFBSSxVQUFVLGNBQWM7QUFDOUMsWUFBTSxVQUFVLE1BQU8sS0FBSyxJQUFZLE1BQU0sV0FBVyxJQUFJO0FBQzdELFlBQU0sUUFBUSxRQUFRLE1BQU0sSUFBSTtBQUNoQyxVQUFJLGdCQUFnQixNQUFNO0FBRTFCLFVBQUksYUFBYSxRQUFRLE1BQU0sV0FBVztBQUN6QyxlQUFPLGdCQUFnQixLQUFLLE1BQU0sZ0JBQWdCLENBQUMsRUFBRSxLQUFLLE1BQU0sSUFBSTtBQUNuRTtBQUFBLFFBQ0Q7QUFBQSxNQUNEO0FBQ0EsbUJBQWEsWUFBWSxZQUFhLGdCQUFnQixDQUFFO0FBQUEsSUFDekQ7QUFBQSxFQUNEO0FBQUEsRUFDQSxNQUFNLDZCQUE2QjtBQUNsQyxRQUFJLGVBQWUsS0FBSyxJQUFJLFVBQVUsb0JBQW9CLDRCQUFZO0FBQ3RFLFFBQUksY0FBYztBQUNqQixZQUFNLFVBQVUsYUFBYTtBQUM3QixjQUFRLFlBQVksQ0FBQztBQUFBLElBQ3JCO0FBQUEsRUFDRjtBQUFBLEVBQ0Esa0JBQWtCLFFBQWdCO0FBQ2pDLFVBQU0sYUFBYSxLQUFLLElBQUksVUFBVTtBQUN0QyxRQUFJLENBQUMsY0FBYyxXQUFXLEtBQUssWUFBWSxNQUFNO0FBQVk7QUFFakUsVUFBTSxtQkFBbUIsV0FBVyxLQUFLLFlBQVksY0FBYyx3QkFBd0I7QUFDM0YsUUFBSSxrQkFBa0I7QUFDcEIsdUJBQWlCLFNBQVM7QUFBQSxRQUMzQixLQUFLO0FBQUEsUUFDTCxVQUFVO0FBQUEsTUFDVCxDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0M7QUFDSDsiLAogICJuYW1lcyI6IFtdCn0K
